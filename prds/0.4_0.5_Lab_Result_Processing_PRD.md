# PRD: Feature 0.4 & 0.5 â€” Lab Result Upload & Processing Engine

## 1. Introduction
This feature is the "critical engine" of the app. It allows users to upload unstructured medical data (PDFs, photos) and converts it into structured biomarker data that the app can act upon.

## 2. Goals
- Eliminate manual data entry for users.
- Extract high-accuracy biomarker data from diverse formats (NHS PDFs, lab screenshots, private reports).
- Store structured data for historical tracking and analysis.

## 3. Functional Requirements
### 3.1 Upload Capabilities
- **Multi-format Support:** Support for PDF uploads, camera photos (OCR), and gallery image uploads.
- **Asynchronous Processing:** Users should see a "Processing" state while the engine extracts data.

### 3.2 Extraction Logic
- **Biomarker Identification:** Recognize names like Vitamin D, HbA1c, TSH, CRP, etc.
- **Value Extraction:** Extract the numeric value, the unit of measurement (e.g., nmol/L, mg/dL), and the laboratory's reference range.
- **Verification:** Store the extracted data in a structured format in the user's profile.

## 4. Technical Constraints
- **Storage:** Use Supabase Storage for raw file hosting.
- **OCR/Extraction:** Utilize LLM-based vision models (e.g., GPT-4o) or specialized medical OCR services for high-accuracy extraction.
- **Database:** Store structured results in a `biomarkers` table.

## 5. Success Metrics
- Extraction accuracy (percentage of correctly identified biomarkers vs. manual verification).
- Time taken from upload to structured data availability.
