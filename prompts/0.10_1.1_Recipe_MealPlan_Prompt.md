# Vibe Engineering Prompt: Recipe & Meal Plan (Supabase + AI)

## Context
You are building the "Execution Layer" of the app. It creates recipes and plans that the user will actually use in their kitchen.

## Instructions
- Create a `recipes` table:
    - `id` (UUID)
    - `title` (Text)
    - `ingredients` (JSONB)
    - `instructions` (Text)
    - `biomarker_benefits` (Text)
    - `nutrients` (JSONB)
- Create a `meal_plans` table:
    - `id` (UUID)
    - `user_id` (UUID)
    - `start_date` (Date)
    - `plan_data` (JSONB - structured as { day_1: { breakfast_id, lunch_id, dinner_id }, ... })

## Backend Logic (Cursor Instructions)
1. **Preference Fetching:** Before generating a recipe, fetch the user's `preferences` (likes/dislikes) and `constraints` from the `profiles` table.
2. **AI Generation (Recipe):** Prompt the LLM: "Generate a recipe for [Meal Type] that includes [Target Ingredients] for [Biomarker]. Exclude [Dislikes]. Return a JSON object with title, ingredients (list with quantities), instructions (steps), and a brief explanation of how it helps [Biomarker]."
3. **Meal Plan Logic:** Create a function to generate a full 7-day plan. Ensure it doesn't repeat the same recipe too frequently and maintains a balanced caloric/nutrient profile.
4. **Persistence:** Save generated recipes to the `recipes` table so they can be referenced by ID in the `meal_plans` table.

## Vibe Guidelines
- Recipes should be realistic and easy to follow.
- Use the "biomarker_benefits" field to constantly remind the user *why* they are eating this specific meal (e.g., "This meal is packed with Vitamin D to boost your immunity").
